<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <ConfigVersion>1.3</ConfigVersion>
  <SPHashFile>ADFSTkTest-SPHashfile.xml</SPHashFile>
  <MetadataCacheFile>ADFSTkTest-metadata.cached.xml</MetadataCacheFile>
  <LocalRelyingPartyFile>get-ADFSTkLocalManualSPSettings.ps1</LocalRelyingPartyFile>
  <MetadataPrefix>ADFSTkTest</MetadataPrefix>
  <MetadataPrefixSeparator>:</MetadataPrefixSeparator>
  <eduPersonPrincipalNameRessignable>false</eduPersonPrincipalNameRessignable>
  <Logging useEventLog="true">
    <LogName>ADFSToolkit</LogName>
    <Source>Import-ADFSTkMetadata</Source>
  </Logging>
  <metadataURL>https://mds.adfstoolkit.org/md/test-metadata.xml</metadataURL>
  <signCertFingerprint>1234567890</signCertFingerprint>
  <claimsProviders>
    <claimsProvider>Active Directory</claimsProvider>
  </claimsProviders>
  <staticValues>
    <o>University Of Example</o>
    <co>Fantasia United</co>
    <c>FU</c>
    <schacHomeOrganization>universityofexample.edu</schacHomeOrganization>
    <norEduOrgAcronym>UoE</norEduOrgAcronym>
    <schacHomeOrganizationType>urn:schac:homeOrganizationType:eu:educationInstitution</schacHomeOrganizationType>
    <!-- This value is for EU higher education institution, other allowed values are:
			urn:schac:homeOrganizationType:eu:educationInstitution
			urn:schac:homeOrganizationType:int:NREN
			urn:schac:homeOrganizationType:int:universityHospital
			urn:schac:homeOrganizationType:int:NRENAffiliate
			urn:schac:homeOrganizationType:int:other
		-->
    <ADFSExternalDNS>adfs.universityofexample.edu</ADFSExternalDNS>
  </staticValues>
  <storeConfig>
    <stores>
      <store name="Active Directory" storetype="Active Directory" issuer="AD AUTHORITY" type="http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsaccountname" order="1" />
      <store name="Test Custom Store" storetype="Custom Store" issuer="AD AUTHORITY" type="http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsaccountname" order="2" />
      <store name="Test SQL" storetype="SQL" issuer="AD AUTHORITY" type="http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsaccountname" order="3">
                <query>SELECT CONVERT(varchar(10), Id) FROM myTable WHERE uid = REPLACE({0}, 'EDU\', '')</query>
      </store>
    </stores>
  </storeConfig>
  <transformRules>
    <rule name="ADFSTkExtractSubjectUniqueId" originClaim="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn" />
  </transformRules>
  <attributes>
    <attribute type="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname" store="Active Directory" name="givenname" />
    <attribute type="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname" store="Active Directory" name="sn" />
    <attribute type="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/displayname" store="Test Custom Store" name="displayname" />
    <attribute type="http://schemas.xmlsoap.org/claims/CommonName" store="Active Directory" name="cn" />
    <attribute type="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name" store="Active Directory" name="name" />
    <attribute type="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress" store="Test SQL" />
   
       <attribute type="urn:mace:dir:attribute-def:eduPersonAffiliation" store="Test Custom Store" name="eduPersonAffiliation">
      <restrictedvalue>faculty</restrictedvalue>
      <restrictedvalue>staff</restrictedvalue>
      <restrictedvalue>employee</restrictedvalue>
      <restrictedvalue>student</restrictedvalue>
      <restrictedvalue>alum</restrictedvalue>
      <restrictedvalue>affiliate</restrictedvalue>
      <restrictedvalue>member</restrictedvalue>
      <restrictedvalue>library-walk-in</restrictedvalue>
    </attribute>
    <attribute type="urn:mace:dir:attribute-def:eduPersonScopedAffiliation" store="Test Custom Store" name="eduPersonScopedAffiliation">
      <restrictedvalue>faculty@universityofexample.edu</restrictedvalue>
      <restrictedvalue>staff@universityofexample.edu</restrictedvalue>
      <restrictedvalue>employee@universityofexample.edu</restrictedvalue>
      <restrictedvalue>student@universityofexample.edu</restrictedvalue>
      <restrictedvalue>alum@universityofexample.edu</restrictedvalue>
      <restrictedvalue>affiliate@universityofexample.edu</restrictedvalue>
      <restrictedvalue>member@universityofexample.edu</restrictedvalue>
      <restrictedvalue>library-walk-in@universityofexample.edu</restrictedvalue>
    </attribute>
   
    <attribute type="urn:mace:dir:attribute-def:norEduPersonNIN" store="Active Directory" name="norEduPersonNIN">
      <allowedRegistrationAuthorities>
        <registrationAuthority>http://adfstoolkit.org</registrationAuthority>
      </allowedRegistrationAuthorities>
    </attribute>
    <attribute type="urn:mace:dir:attribute-def:personalIdentityNumber" store="Active Directory" name="norEduPersonNIN">
      <allowedRegistrationAuthorities>
        <registrationAuthority>http://adfstoolkit.org</registrationAuthority>
      </allowedRegistrationAuthorities>
    </attribute>
    <attribute type="urn:mace:dir:attribute-def:schacDateOfBirth" store="Active Directory" name="norEduPersonNIN" />
    <attribute type="urn:mace:dir:attribute-def:norEduPersonLIN" store="Active Directory" name="norEduPersonLIN" />
    <attribute type="urn:mace:dir:attribute-def:eduPersonUniqueID" store="Active Directory" name="norEduPersonLIN" />
    <attribute type="urn:mace:dir:attribute-def:eduPersonEntitlement" store="Active Directory" name="edupersonentitlement" useGroups="true">
      <group name="employee" value="urn:mace:terena.org:tcs:personal-user" />
      <group name="employee" value="urn:mace:terena.org:tcs:escience-user" />
      <group name="Terena Personal Certificate Admin" value="urn:mace:terena.org:tcs:personal-admin" />
      <group name="Terena Personal Certificate Admin" value="urn:mace:terena.org:tcs:escience-admin" />
    </attribute>
    <attribute type="urn:mace:dir:attribute-def:eduPersonAssurance" store="Static">
      <value>http://www.EXAMPLE.COM/policy/assurance/al1</value>
      <value>http://www.EXAMPLE.COM/policy/assurance/al2</value>
    </attribute>
    <attribute type="http://schemas.xmlsoap.org/claims/samaccountname" store="Active Directory" name="samaccountname" />
    <attribute type="http://schemas.xmlsoap.org/claims/Group" store="Active Directory" name="tokenGroups" />
  </attributes>
</configuration>